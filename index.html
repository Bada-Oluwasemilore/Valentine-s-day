<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Valentine's Day Scrapbook</title>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Nunito:wght@400;700&family=Dancing+Script:wght@600&family=Gochi+Hand&display=swap" rel="stylesheet">
    <style>
        :root {
            --env-body: #6d1c1c; 
            --env-flap: #8b2d2d; 
            --env-inside: #f4e7d3; 
            --accent: #8b2d2d; 
            --scrapbook-bg: #f4e7d3;
        }

        body {
            margin: 0; padding: 0; height: 100vh; display: flex; justify-content: center; align-items: center;
            background-color: #f2e1d9; font-family: 'Nunito', sans-serif; overflow: hidden; perspective: 2000px;
        }

        /* --- Envelope --- */
        .stage { position: relative; width: 320px; height: 220px; transform: scale(1.3); z-index: 1000; cursor: pointer; }
        .envelope { position: relative; width: 100%; height: 100%; background: var(--env-body); border-radius: 0 0 12px 12px; box-shadow: 0 15px 35px rgba(0,0,0,0.4); }
        .envelope::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: var(--env-inside); z-index: 1; border-radius: 0 0 12px 12px; }
        .flap { position: absolute; top:0; left:0; width:0; height:0; border-style:solid; border-width:130px 160px 0 160px; border-color: var(--env-flap) transparent transparent transparent; transform-origin: top; z-index: 30; transition: transform 0.8s; filter: drop-shadow(0 2px 5px rgba(0,0,0,0.3)); }
        .flap.open { transform: rotateX(180deg); z-index: 5; }
        .seal { position: absolute; top: 130px; left: 50%; transform: translate(-50%, -50%); width: 55px; height: 55px; background: radial-gradient(circle at 30% 30%, #a62121, #6d1c1c); border-radius: 50%; z-index: 40; display: flex; align-items: center; justify-content: center; font-size: 28px; color: rgba(255,255,255,0.6); box-shadow: 0 4px 10px rgba(0,0,0,0.4); border: 2px solid #5a1515; animation: wiggle 2.5s infinite ease-in-out; }
        .stage.active .seal { animation: none; opacity: 0; }

        @keyframes wiggle { 0%, 100% { transform: translate(-50%, -50%) rotate(0deg); } 10%, 30% { transform: translate(-50%, -50%) rotate(-8deg); } 20%, 40% { transform: translate(-50%, -50%) rotate(8deg); } 50% { transform: translate(-50%, -50%) rotate(0deg); } }

        /* --- Scrapbook Structure --- */
        .card { position: fixed; top: 50%; left: 50%; width: 90vw; height: 80vh; max-width: 900px; max-height: 600px; transform: translate(-50%, -50%) scale(0); transition: all 1.2s cubic-bezier(0.175, 0.885, 0.32, 1.275); transform-style: preserve-3d; opacity: 0; z-index: 100; }
        .card.emerge { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        .book { width: 100%; height: 100%; position: relative; transform-style: preserve-3d; box-shadow: 0 25px 50px rgba(0,0,0,0.5); }

        .page { 
            position: absolute; width: 50%; height: 100%; top: 0; 
            background: var(--scrapbook-bg); 
            background-image: radial-gradient(#d1bfa7 1px, transparent 1px);
            background-size: 20px 20px;
            border: 2px solid #dcd0bc;
            box-sizing: border-box; display: flex; flex-direction: column; align-items: center; justify-content: center; 
            padding: 30px; transition: transform 1.5s cubic-bezier(0.645, 0.045, 0.355, 1);
            transform-style: preserve-3d; backface-visibility: hidden;
        }

        /* Handmade Stamp Style */
        .handmade-stamp {
            position: absolute; top: 20px; right: 20px; width: 80px; height: 80px;
            border: 3px double #8b2d2d; border-radius: 50%; display: flex; align-items: center;
            justify-content: center; text-align: center; color: #8b2d2d;
            font-family: 'Gochi Hand', cursive; font-size: 0.8rem; line-height: 1;
            transform: rotate(15deg); opacity: 0.7; pointer-events: none;
        }

        .tape { position: absolute; width: 80px; height: 30px; background: rgba(255, 255, 255, 0.3); backdrop-filter: blur(2px); transform: rotate(-5deg); top: 10px; z-index: 5; box-shadow: 1px 1px 3px rgba(0,0,0,0.1); }
        .page-static-left { left: 0; z-index: 1; border-right: 5px solid #5a1515; }
        .page-static-right { left: 50%; z-index: 1; padding: 0; overflow: hidden; background: #000; position: relative; border-left: 5px solid #5a1515; }
        .page-flip { left: 50%; transform-origin: left; z-index: 10; }
        .page-flip.flipped { transform: rotateY(-180deg); }

        .front, .back { position: absolute; width: 100%; height: 100%; top: 0; left: 0; backface-visibility: hidden; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 30px; box-sizing: border-box; background: var(--scrapbook-bg); background-image: radial-gradient(#d1bfa7 1px, transparent 1px); background-size: 20px 20px; }
        .back { transform: rotateY(180deg); border-right: 5px solid #5a1515; }

        .cover { position: absolute; inset: 0; background: var(--env-flap); box-shadow: inset 0 0 60px rgba(0,0,0,0.6); transform-origin: left; transition: transform 1.5s ease-in-out; z-index: 100; display: flex; flex-direction: column; justify-content: center; align-items: center; border-radius: 5px 12px 12px 5px; color: #f4e7d3; backface-visibility: hidden; border-left: 15px solid #5a1515; }
        .card.open-book .cover { transform: rotateY(-180deg); }

        .char-box { width: 180px; margin-bottom: 20px; background: white; padding: 8px 8px 30px 8px; box-shadow: 3px 5px 15px rgba(0,0,0,0.2); transform: rotate(-3deg); border: 1px solid #ddd; position: relative; }
        .char-box img { width: 100%; height: auto; display: block; }
        .caption { font-family: 'Gochi Hand', cursive; position: absolute; bottom: 5px; left: 0; width: 100%; text-align: center; color: #8b2d2d; font-size: 1.1rem; }

        video { width: 100%; height: 100%; object-fit: cover; }
        .text-content { font-family: 'Gochi Hand', cursive; font-size: 1.3rem; line-height: 1.4; color: #333; text-align: center; background: rgba(255,255,255,0.4); padding: 15px; border-radius: 5px; transform: rotate(1deg); }
        
        #finalOverlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(40, 10, 10, 0.9); display: flex; flex-direction: column; justify-content: center; align-items: center; opacity: 0; transition: opacity 2s ease; z-index: 100; color: white; text-align: center; pointer-events: none; }
        .love-text { font-family: 'Great Vibes', cursive; font-size: 4rem; margin-bottom: 10px; }
        .final-signature { font-family: 'Dancing Script', cursive; font-size: 1.5rem; opacity: 0; transition: opacity 1s 1s; }

        .petal { position: absolute; color: #ff4d6d; pointer-events: none; z-index: 200; font-size: 22px; animation: fall linear forwards; }
        @keyframes fall { 0% { transform: translateY(-10vh) translateX(0) rotate(0deg); opacity: 1; } 100% { transform: translateY(110vh) translateX(100px) rotate(360deg); opacity: 0; } }

        .next-btn { position: absolute; bottom: 30px; right: 30px; background: #8b2d2d; color: white; border: none; padding: 12px 25px; border-radius: 5px; cursor: pointer; font-family: 'Gochi Hand', cursive; font-size: 1.2rem; transition: all 0.3s; z-index: 500; opacity: 0; pointer-events: none; }
        .next-btn.show { opacity: 1; pointer-events: auto; }
        @keyframes blink { 50% { opacity: 0; } }
    </style>
</head>
<body>

    <audio id="bgMusic" loop><source src="Bruno Mars - Just the Way You Are.mp3" type="audio/mpeg"></audio>

    <div class="stage" id="stage" onclick="openEnvelope()">
        <div class="envelope">
            <div class="flap" id="flap"></div>
            <div class="seal" id="seal">â™¥</div>
        </div>
    </div>

    <div class="card" id="card">
        <div class="cover">
            <h1 style="font-family: 'Great Vibes'; font-size: 3.5rem;">To My Beloved Tito</h1>
            <p style="font-family: 'Gochi Hand'; font-size: 1.2rem; letter-spacing: 2px;">VAL DAY 2026</p>
            <div style="font-size: 60px; margin-top: 20px;">ðŸ’–</div>
        </div>

        <div class="book" id="bookContent">
            <div class="page page-static-left">
                <div class="tape" style="left: -10px; top: 20px; transform: rotate(-45deg);"></div>
                <div class="char-box">
                    <img src="susan-lu4esm-ai-generated-7740032_1920-removebg-preview.png" alt="Sweet Bear">
                    <div class="caption">â™¥ To My Love â™¥</div>
                </div>
                <div class="text-content" id="msg1"></div>
            </div>

            <div class="page page-static-right">
                <video id="vdayVideo" playsinline muted>
                    <source src="WhatsApp Video 2026-02-09 at 14.41.14.mp4" type="video/mp4">
                </video>
                <div id="finalOverlay">
                    <div class="love-text">I Love You</div>
                    <div class="final-signature" id="finalSig">Forever Yours,<br>Your Boyfriend</div>
                </div>
            </div>

            <div class="page page-flip" id="flip1" style="z-index: 10;">
                <div class="front">
                    <div class="tape" style="right: -15px; top: 10px; transform: rotate(30deg); background: rgba(255, 255, 255, 0.4);"></div>
                    <div class="char-box" style="transform: rotate(4deg);">
                        <img src="download.jpg" alt="Mickey and Minnie">
                        <div class="caption">â™¥ Always Together â™¥</div>
                    </div>
                    <div class="text-content" id="msg2"></div>
                </div>
                <div class="back">
                    <div class="handmade-stamp">Handmade<br>with Love</div>
                    <div class="tape" style="left: 10px; top: -10px; transform: rotate(-10deg); width: 100px;"></div>
                    <div class="text-content" id="msg3"></div>
                    <div class="text-content" id="msg4" style="margin-top: 20px; border-top: 1px dashed #aaa; padding-top: 10px;"></div>
                </div>
            </div>
        </div>
        
        <button class="next-btn" id="nextBtn">Turn Page âž”</button>
    </div>

    <script>
        const texts = [
            "Hello baby, it's been 18 days since I finally mustered the courage to listen to my heart but it's been more than 5 years I've had you in it.",
            "I just want you to know you are a very special part of my life, you mean a lot to me and I'm really glad to have a girlfriend like you.",
            "Every moment spent with you feels like a beautiful dream. I promise to be your biggest fan, your best friend through the highs and lows and your strongest shoulder to lean on.",
            "From your laugh to the gleam in your eyes when you smile... you're amazing just the way you are. Happy Valentine's Day my love â™¥."
        ];

        let state = 0;
        const video = document.getElementById('vdayVideo');
        const overlay = document.getElementById('finalOverlay');
        const finalSig = document.getElementById('finalSig');

        function openEnvelope() {
            document.getElementById('stage').classList.add('active');
            document.getElementById('bgMusic').play();
            document.getElementById('flap').classList.add('open');
            setTimeout(() => {
                document.getElementById('stage').style.opacity = '0';
                document.getElementById('stage').style.pointerEvents = 'none';
                document.getElementById('card').classList.add('emerge');
                setTimeout(startBook, 3500); 
            }, 800);
        }

        async function startBook() {
            document.getElementById('card').classList.add('open-book');
            await typeEffect('msg1', texts[0]);
            await typeEffect('msg2', texts[1]);
            document.getElementById('nextBtn').classList.add('show');
            state = 1;
        }

        async function next() {
            const btn = document.getElementById('nextBtn');
            btn.classList.remove('show');
            if (state === 1) {
                document.getElementById('flip1').classList.add('flipped');
                setTimeout(async () => {
                    await typeEffect('msg3', texts[2]);
                    await typeEffect('msg4', texts[3]);
                    video.play(); 
                    state = 2;
                }, 1000);
            }
        }

        video.onended = () => { overlay.style.opacity = "1"; finalSig.style.opacity = "1"; startPetals(); };

        async function typeEffect(id, text) {
            let el = document.getElementById(id);
            if(!el) return;
            for (let i = 0; i <= text.length; i++) {
                el.innerHTML = text.substring(0, i) + (i < text.length ? '<span style="border-left:2px solid #8b2d2d; animation: blink 0.8s infinite">|</span>' : '');
                await new Promise(r => setTimeout(r, 45));
            }
            el.innerHTML = text;
        }

        function startPetals() {
            setInterval(() => {
                const petal = document.createElement('div');
                petal.classList.add('petal'); petal.innerHTML = 'ðŸŒ¸';
                petal.style.left = Math.random() * 100 + 'vw';
                petal.style.animationDuration = (Math.random() * 3 + 2) + 's';
                document.body.appendChild(petal);
                setTimeout(() => petal.remove(), 5000);
            }, 300);
        }

        document.getElementById('nextBtn').onclick = next;
    </script>
</body>
</html>
